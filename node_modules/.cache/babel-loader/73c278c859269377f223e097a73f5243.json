{"ast":null,"code":"import axios from\"axios\";import{useEffect,useState,useContext}from\"react\";import{SidebarContext}from\"../context/SidebarContext\";const useAsync=asyncFunction=>{const[data,setData]=useState([]||{});const[error,setError]=useState(\"\");const[loading,setLoading]=useState(true);const{isUpdate,setIsUpdate,currentPage,category,searchText,status,zone,time,sortedField,source,limitData}=useContext(SidebarContext);useEffect(()=>{let unmounted=false;let source=axios.CancelToken.source();asyncFunction({cancelToken:source.token}).then(res=>{if(!unmounted){setData(res);setError(\"\");setLoading(false);}}).catch(err=>{if(!unmounted){setError(err.message);if(axios.isCancel(err)){setError(err.message);setLoading(false);setData([]);}else{setError(err.message);setLoading(false);setData([]);}}});setIsUpdate(false);return()=>{unmounted=true;source.cancel(\"Cancelled in cleanup\");};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[isUpdate,currentPage,category,searchText,status,zone,time,sortedField,source,limitData]);return{data,error,loading};};export default useAsync;","map":{"version":3,"names":["axios","useEffect","useState","useContext","SidebarContext","useAsync","asyncFunction","data","setData","error","setError","loading","setLoading","isUpdate","setIsUpdate","currentPage","category","searchText","status","zone","time","sortedField","source","limitData","unmounted","CancelToken","cancelToken","token","then","res","catch","err","message","isCancel","cancel"],"sources":["/var/www/admin/src/hooks/useAsync.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState, useContext } from \"react\";\nimport { SidebarContext } from \"../context/SidebarContext\";\n\nconst useAsync = (asyncFunction) => {\n  const [data, setData] = useState([] || {});\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const {\n    isUpdate,\n    setIsUpdate,\n    currentPage,\n    category,\n    searchText,\n    status,\n    zone,\n    time,\n    sortedField,\n    source,\n    limitData,\n  } = useContext(SidebarContext);\n\n  useEffect(() => {\n    let unmounted = false;\n    let source = axios.CancelToken.source();\n\n    asyncFunction({ cancelToken: source.token })\n      .then((res) => {\n        if (!unmounted) {\n          setData(res);\n          setError(\"\");\n          setLoading(false);\n        }\n      })\n      .catch((err) => {\n        if (!unmounted) {\n          setError(err.message);\n          if (axios.isCancel(err)) {\n            setError(err.message);\n            setLoading(false);\n            setData([]);\n          } else {\n            setError(err.message);\n            setLoading(false);\n            setData([]);\n          }\n        }\n      });\n\n    setIsUpdate(false);\n\n    return () => {\n      unmounted = true;\n      source.cancel(\"Cancelled in cleanup\");\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    isUpdate,\n    currentPage,\n    category,\n    searchText,\n    status,\n    zone,\n    time,\n    sortedField,\n    source,\n    limitData,\n  ]);\n\n  return {\n    data,\n    error,\n    loading,\n  };\n};\n\nexport default useAsync;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CACvD,OAASC,cAAc,KAAQ,2BAA2B,CAE1D,KAAM,CAAAC,QAAQ,CAAIC,aAAa,EAAK,CAClC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGN,QAAQ,CAAC,EAAE,EAAI,CAAC,CAAC,CAAC,CAC1C,KAAM,CAACO,KAAK,CAAEC,QAAQ,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACS,OAAO,CAAEC,UAAU,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CACJW,QAAQ,CACRC,WAAW,CACXC,WAAW,CACXC,QAAQ,CACRC,UAAU,CACVC,MAAM,CACNC,IAAI,CACJC,IAAI,CACJC,WAAW,CACXC,MAAM,CACNC,SACF,CAAC,CAAGpB,UAAU,CAACC,cAAc,CAAC,CAE9BH,SAAS,CAAC,IAAM,CACd,GAAI,CAAAuB,SAAS,CAAG,KAAK,CACrB,GAAI,CAAAF,MAAM,CAAGtB,KAAK,CAACyB,WAAW,CAACH,MAAM,CAAC,CAAC,CAEvChB,aAAa,CAAC,CAAEoB,WAAW,CAAEJ,MAAM,CAACK,KAAM,CAAC,CAAC,CACzCC,IAAI,CAAEC,GAAG,EAAK,CACb,GAAI,CAACL,SAAS,CAAE,CACdhB,OAAO,CAACqB,GAAG,CAAC,CACZnB,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAC,CACDkB,KAAK,CAAEC,GAAG,EAAK,CACd,GAAI,CAACP,SAAS,CAAE,CACdd,QAAQ,CAACqB,GAAG,CAACC,OAAO,CAAC,CACrB,GAAIhC,KAAK,CAACiC,QAAQ,CAACF,GAAG,CAAC,CAAE,CACvBrB,QAAQ,CAACqB,GAAG,CAACC,OAAO,CAAC,CACrBpB,UAAU,CAAC,KAAK,CAAC,CACjBJ,OAAO,CAAC,EAAE,CAAC,CACb,CAAC,IAAM,CACLE,QAAQ,CAACqB,GAAG,CAACC,OAAO,CAAC,CACrBpB,UAAU,CAAC,KAAK,CAAC,CACjBJ,OAAO,CAAC,EAAE,CAAC,CACb,CACF,CACF,CAAC,CAAC,CAEJM,WAAW,CAAC,KAAK,CAAC,CAElB,MAAO,IAAM,CACXU,SAAS,CAAG,IAAI,CAChBF,MAAM,CAACY,MAAM,CAAC,sBAAsB,CAAC,CACvC,CAAC,CACD;AACF,CAAC,CAAE,CACDrB,QAAQ,CACRE,WAAW,CACXC,QAAQ,CACRC,UAAU,CACVC,MAAM,CACNC,IAAI,CACJC,IAAI,CACJC,WAAW,CACXC,MAAM,CACNC,SAAS,CACV,CAAC,CAEF,MAAO,CACLhB,IAAI,CACJE,KAAK,CACLE,OACF,CAAC,CACH,CAAC,CAED,cAAe,CAAAN,QAAQ"},"metadata":{},"sourceType":"module"}