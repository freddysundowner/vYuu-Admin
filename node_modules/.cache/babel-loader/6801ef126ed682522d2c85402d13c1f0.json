{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import{useForm}from\"react-hook-form\";import{SidebarContext}from\"../context/SidebarContext\";import InterestServices from\"../services/InterestServices\";import{notifyError,notifySuccess}from\"../utils/toast\";const useInterestSubmit=id=>{const{isDrawerOpen,closeDrawer,setIsUpdate}=useContext(SidebarContext);const{register,handleSubmit,setValue,clearErrors,formState:{errors}}=useForm();const onSubmit=_ref=>{let{name,type}=_ref;if(!name){notifyError(\"name is required!\");return;}const channelData={title:name};if(id){InterestServices.updateChannel(id,channelData).then(res=>{setIsUpdate(true);notifySuccess(\"Updated successfully\");}).catch(err=>notifyError(err.message));closeDrawer();}else{InterestServices.addChannel(channelData).then(res=>{setIsUpdate(true);notifySuccess(\"added successfully\");}).catch(err=>notifyError(err.message));closeDrawer();}};useEffect(()=>{if(!isDrawerOpen){setValue(\"name\");clearErrors(\"name\");return;}if(id){InterestServices.getChannelsById(id).then(res=>{if(res){setValue(\"name\",res.title);}}).catch(err=>{notifyError(\"There is a server error!\");});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[id,setValue,isDrawerOpen]);return{register,handleSubmit,onSubmit,errors};};export default useInterestSubmit;","map":{"version":3,"names":["useContext","useEffect","useState","useForm","SidebarContext","InterestServices","notifyError","notifySuccess","useInterestSubmit","id","isDrawerOpen","closeDrawer","setIsUpdate","register","handleSubmit","setValue","clearErrors","formState","errors","onSubmit","_ref","name","type","channelData","title","updateChannel","then","res","catch","err","message","addChannel","getChannelsById"],"sources":["/var/www/admin/src/hooks/useInterestSubmit.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { SidebarContext } from \"../context/SidebarContext\";\nimport InterestServices from \"../services/InterestServices\";\nimport { notifyError, notifySuccess } from \"../utils/toast\";\n\nconst useInterestSubmit = (id) => {\n  const { isDrawerOpen, closeDrawer, setIsUpdate } = useContext(SidebarContext);\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    clearErrors,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = ({ name, type }) => {\n    if (!name) {\n      notifyError(\"name is required!\");\n      return;\n    }\n    const channelData = {\n      title: name,\n    };\n\n    if (id) {\n      InterestServices.updateChannel(id, channelData)\n        .then((res) => {\n          setIsUpdate(true);\n          notifySuccess(\"Updated successfully\");\n        })\n        .catch((err) => notifyError(err.message));\n      closeDrawer();\n    } else {\n      InterestServices.addChannel(channelData)\n        .then((res) => {\n          setIsUpdate(true);\n          notifySuccess(\"added successfully\");\n        })\n        .catch((err) => notifyError(err.message));\n      closeDrawer();\n    }\n  };\n\n  useEffect(() => {\n    if (!isDrawerOpen) {\n      setValue(\"name\");\n      clearErrors(\"name\");\n      return;\n    }\n    if (id) {\n      InterestServices.getChannelsById(id)\n        .then((res) => {\n          if (res) {\n            setValue(\"name\", res.title);\n          }\n        })\n        .catch((err) => {\n          notifyError(\"There is a server error!\");\n        });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id, setValue, isDrawerOpen]);\n  return {\n    register,\n    handleSubmit,\n    onSubmit,\n    errors,\n  };\n};\n\nexport default useInterestSubmit;\n"],"mappings":"AAAA,OAASA,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACvD,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,cAAc,KAAQ,2BAA2B,CAC1D,MAAO,CAAAC,gBAAgB,KAAM,8BAA8B,CAC3D,OAASC,WAAW,CAAEC,aAAa,KAAQ,gBAAgB,CAE3D,KAAM,CAAAC,iBAAiB,CAAIC,EAAE,EAAK,CAChC,KAAM,CAAEC,YAAY,CAAEC,WAAW,CAAEC,WAAY,CAAC,CAAGZ,UAAU,CAACI,cAAc,CAAC,CAE7E,KAAM,CACJS,QAAQ,CACRC,YAAY,CACZC,QAAQ,CACRC,WAAW,CACXC,SAAS,CAAE,CAAEC,MAAO,CACtB,CAAC,CAAGf,OAAO,CAAC,CAAC,CAEb,KAAM,CAAAgB,QAAQ,CAAGC,IAAA,EAAoB,IAAnB,CAAEC,IAAI,CAAEC,IAAK,CAAC,CAAAF,IAAA,CAC9B,GAAI,CAACC,IAAI,CAAE,CACTf,WAAW,CAAC,mBAAmB,CAAC,CAChC,OACF,CACA,KAAM,CAAAiB,WAAW,CAAG,CAClBC,KAAK,CAAEH,IACT,CAAC,CAED,GAAIZ,EAAE,CAAE,CACNJ,gBAAgB,CAACoB,aAAa,CAAChB,EAAE,CAAEc,WAAW,CAAC,CAC5CG,IAAI,CAAEC,GAAG,EAAK,CACbf,WAAW,CAAC,IAAI,CAAC,CACjBL,aAAa,CAAC,sBAAsB,CAAC,CACvC,CAAC,CAAC,CACDqB,KAAK,CAAEC,GAAG,EAAKvB,WAAW,CAACuB,GAAG,CAACC,OAAO,CAAC,CAAC,CAC3CnB,WAAW,CAAC,CAAC,CACf,CAAC,IAAM,CACLN,gBAAgB,CAAC0B,UAAU,CAACR,WAAW,CAAC,CACrCG,IAAI,CAAEC,GAAG,EAAK,CACbf,WAAW,CAAC,IAAI,CAAC,CACjBL,aAAa,CAAC,oBAAoB,CAAC,CACrC,CAAC,CAAC,CACDqB,KAAK,CAAEC,GAAG,EAAKvB,WAAW,CAACuB,GAAG,CAACC,OAAO,CAAC,CAAC,CAC3CnB,WAAW,CAAC,CAAC,CACf,CACF,CAAC,CAEDV,SAAS,CAAC,IAAM,CACd,GAAI,CAACS,YAAY,CAAE,CACjBK,QAAQ,CAAC,MAAM,CAAC,CAChBC,WAAW,CAAC,MAAM,CAAC,CACnB,OACF,CACA,GAAIP,EAAE,CAAE,CACNJ,gBAAgB,CAAC2B,eAAe,CAACvB,EAAE,CAAC,CACjCiB,IAAI,CAAEC,GAAG,EAAK,CACb,GAAIA,GAAG,CAAE,CACPZ,QAAQ,CAAC,MAAM,CAAEY,GAAG,CAACH,KAAK,CAAC,CAC7B,CACF,CAAC,CAAC,CACDI,KAAK,CAAEC,GAAG,EAAK,CACdvB,WAAW,CAAC,0BAA0B,CAAC,CACzC,CAAC,CAAC,CACN,CACA;AACF,CAAC,CAAE,CAACG,EAAE,CAAEM,QAAQ,CAAEL,YAAY,CAAC,CAAC,CAChC,MAAO,CACLG,QAAQ,CACRC,YAAY,CACZK,QAAQ,CACRD,MACF,CAAC,CACH,CAAC,CAED,cAAe,CAAAV,iBAAiB"},"metadata":{},"sourceType":"module"}