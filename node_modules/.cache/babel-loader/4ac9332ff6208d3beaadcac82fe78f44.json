{"ast":null,"code":"import React,{useContext}from\"react\";import{Table,TableHeader,TableCell,TableFooter,TableContainer,Input,Card,CardBody,Pagination}from\"@windmill/react-ui\";import useAsync from\"../hooks/useAsync\";import useFilter from\"../hooks/useFilter\";import NotFound from\"../components/table/NotFound\";import RoomseServices from\"../services/RoomseServices\";import Loading from\"../components/preloader/Loading\";import PageTitle from\"../components/Typography/PageTitle\";import RoomsTable from\"../components/rooms/RoomsTable\";import{useLocation}from\"react-router-dom\";import{SidebarContext}from\"../context/SidebarContext\";import{AdminContext}from\"../context/AdminContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Customers=()=>{const{state,dispatch}=useContext(AdminContext);const{adminInfo}=state;const{currentPage,handleChangePage,searchText,category,searchRef,handleSubmitForAll,sortedField,limitData}=useContext(SidebarContext);const location=useLocation();const query=new URLSearchParams(location.search);const type=query.get(\"type\");const{data,loading}=useAsync(()=>RoomseServices.getAllRooms({page:currentPage,limit:limitData,category:category,type,title:searchText,price:sortedField,userid:adminInfo.role==\"shopowner\"?adminInfo._id:\"\"}));const{serviceData,handleOnDrop,handleUploadProducts}=useFilter(data.rooms);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageTitle,{children:\"Rooms\"}),/*#__PURE__*/_jsx(Card,{className:\"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5\",children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmitForAll,className:\"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow\",children:[/*#__PURE__*/_jsx(Input,{ref:searchRef,className:\"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white\",type:\"search\",name:\"search\",placeholder:\"Search by title\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"absolute right-0 top-0 mt-5 mr-1\"})]})})})}),loading?/*#__PURE__*/_jsx(Loading,{loading:loading}):serviceData.length!==0?/*#__PURE__*/_jsxs(TableContainer,{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHeader,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Created Date\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Title\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Product\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Host\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Live Users\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"})]})}),/*#__PURE__*/_jsx(RoomsTable,{rooms:data.rooms})]}),/*#__PURE__*/_jsx(TableFooter,{children:/*#__PURE__*/_jsx(Pagination,{totalResults:data.totalDoc,resultsPerPage:limitData,onChange:handleChangePage,label:\"Table navigation\"})})]}):/*#__PURE__*/_jsx(NotFound,{title:\"Room\"})]});};export default Customers;","map":{"version":3,"names":["React","useContext","Table","TableHeader","TableCell","TableFooter","TableContainer","Input","Card","CardBody","Pagination","useAsync","useFilter","NotFound","RoomseServices","Loading","PageTitle","RoomsTable","useLocation","SidebarContext","AdminContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Customers","state","dispatch","adminInfo","currentPage","handleChangePage","searchText","category","searchRef","handleSubmitForAll","sortedField","limitData","location","query","URLSearchParams","search","type","get","data","loading","getAllRooms","page","limit","title","price","userid","role","_id","serviceData","handleOnDrop","handleUploadProducts","rooms","children","className","onSubmit","ref","name","placeholder","length","totalResults","totalDoc","resultsPerPage","onChange","label"],"sources":["/var/www/admin/src/pages/Rooms.js"],"sourcesContent":["import React, { useContext } from \"react\";\nimport {\n  Table,\n  TableHeader,\n  TableCell,\n  TableFooter,\n  TableContainer,\n  Input,\n  Card,\n  CardBody,\n  Pagination,\n} from \"@windmill/react-ui\";\n\nimport useAsync from \"../hooks/useAsync\";\nimport useFilter from \"../hooks/useFilter\";\nimport NotFound from \"../components/table/NotFound\";\nimport RoomseServices from \"../services/RoomseServices\";\nimport Loading from \"../components/preloader/Loading\";\nimport PageTitle from \"../components/Typography/PageTitle\";\nimport RoomsTable from \"../components/rooms/RoomsTable\";\nimport { useLocation } from \"react-router-dom\";\nimport { SidebarContext } from \"../context/SidebarContext\";\nimport { AdminContext } from \"../context/AdminContext\";\nconst Customers = () => {\n  const { state, dispatch } = useContext(AdminContext);\n  const { adminInfo } = state;\n  const {\n    currentPage,\n    handleChangePage,\n    searchText,\n    category,\n    searchRef,\n    handleSubmitForAll,\n    sortedField,\n    limitData,\n  } = useContext(SidebarContext);\n\n  const location = useLocation();\n  const query = new URLSearchParams(location.search);\n  const type = query.get(\"type\");\n  const { data, loading } = useAsync(() =>\n    RoomseServices.getAllRooms({\n      page: currentPage,\n      limit: limitData,\n      category: category,\n      type,\n      title: searchText,\n      price: sortedField,\n      userid: adminInfo.role == \"shopowner\" ? adminInfo._id : \"\",\n    })\n  );\n\n  const { serviceData, handleOnDrop, handleUploadProducts } = useFilter(\n    data.rooms\n  );\n\n  return (\n    <>\n      <PageTitle>Rooms</PageTitle>\n      <Card className=\"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5\">\n        <CardBody>\n          <form\n            onSubmit={handleSubmitForAll}\n            className=\"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex\"\n          >\n            <div className=\"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow\">\n              <Input\n                ref={searchRef}\n                className=\"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white\"\n                type=\"search\"\n                name=\"search\"\n                placeholder=\"Search by title\"\n              />\n              <button\n                type=\"submit\"\n                className=\"absolute right-0 top-0 mt-5 mr-1\"\n              ></button>\n            </div>\n          </form>\n        </CardBody>\n      </Card>\n\n      {loading ? (\n        <Loading loading={loading} />\n      ) : serviceData.length !== 0 ? (\n        <TableContainer className=\"mb-8\">\n          <Table>\n            <TableHeader>\n              <tr>\n                <TableCell>Created Date</TableCell>\n                <TableCell>Title</TableCell>\n                <TableCell>Product</TableCell>\n                <TableCell>Host</TableCell>\n                <TableCell>Live Users</TableCell>\n                <TableCell>Status</TableCell>\n              </tr>\n            </TableHeader>\n            <RoomsTable rooms={data.rooms} />\n          </Table>\n          <TableFooter>\n            <Pagination\n              totalResults={data.totalDoc}\n              resultsPerPage={limitData}\n              onChange={handleChangePage}\n              label=\"Table navigation\"\n            />\n          </TableFooter>\n        </TableContainer>\n      ) : (\n        <NotFound title=\"Room\" />\n      )}\n    </>\n  );\n};\n\nexport default Customers;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}