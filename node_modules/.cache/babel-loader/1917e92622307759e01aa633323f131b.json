{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import{useForm}from\"react-hook-form\";import Cookies from\"js-cookie\";import dayjs from\"dayjs\";import{useLocation}from\"react-router\";import AdminServices from\"../services/AdminServices\";import{AdminContext}from\"../context/AdminContext\";import{SidebarContext}from\"../context/SidebarContext\";import{notifyError,notifySuccess}from\"../utils/toast\";const useAdminSettingsSubmit=id=>{const{state}=useContext(AdminContext);const{adminInfo}=state;const location=useLocation();const{isDrawerOpen,closeDrawer,setIsUpdate}=useContext(SidebarContext);const{register,handleSubmit,setValue,clearErrors,formState:{errors}}=useForm();const onSubmit=data=>{console.log(data);AdminServices.updateAppSettings(data).then(res=>{setIsUpdate(true);notifySuccess(\"Admin Updated Successfully!\");}).catch(err=>notifyError(err.message));};useEffect(()=>{if(id){AdminServices.getAppSettings(id).then(res=>{if(res){var data=res[0];setValue(\"recordedVideoBaseUrl\",data.recordedVideoBaseUrl);setValue(\"apiBaseUrl\",data.apiBaseUrl);setValue(\"agoraAppRecordKey\",data.agoraAppRecordKey);setValue(\"stripepublickey\",data.stripepublickey);setValue(\"stripeSecretKey\",data.stripeSecretKey);setValue(\"fwPublicKey\",data.fwPublicKey);setValue(\"youTubeStreamKey\",data.youTubeStreamKey);setValue(\"OneSignalApiKey\",data.OneSignalApiKey);setValue(\"oneSignalAppID\",data.oneSignalAppID);setValue(\"currency\",data.currency);setValue(\"commission\",data.commission);setValue(\"fbStreamKey\",data.fbStreamKey);setValue(\"agoraAppID\",data.agoraAppID);setValue(\"AGORA_CERT\",data.AGORA_CERT);setValue(\"AGORA_CUSTOMER_KEY\",data.AGORA_CUSTOMER_KEY);setValue(\"AGORA_CUSTOMER_SECRET\",data.AGORA_CUSTOMER_SECRET);setValue(\"FLUTTERWAVE_SECRET_KEY\",data.FLUTTERWAVE_SECRET_KEY);setValue(\"AWSVENDOR\",data.AWSVENDOR);setValue(\"AWSREGION\",data.AWSREGION);setValue(\"AWSBUCKET\",data.AWSBUCKET);setValue(\"AWSACCESSKEY\",data.AWSACCESSKEY);setValue(\"AWSSECRETKEY\",data.AWSSECRETKEY);setValue(\"iosVersion\",data.iosVersion);setValue(\"androidVersion\",data.androidVersion);}}).catch(err=>{notifyError(\"There is a server error!\");});}},[id,setValue,isDrawerOpen,adminInfo.email,clearErrors]);return{register,handleSubmit,onSubmit,errors};};export default useAdminSettingsSubmit;","map":{"version":3,"names":["useContext","useEffect","useState","useForm","Cookies","dayjs","useLocation","AdminServices","AdminContext","SidebarContext","notifyError","notifySuccess","useAdminSettingsSubmit","id","state","adminInfo","location","isDrawerOpen","closeDrawer","setIsUpdate","register","handleSubmit","setValue","clearErrors","formState","errors","onSubmit","data","console","log","updateAppSettings","then","res","catch","err","message","getAppSettings","recordedVideoBaseUrl","apiBaseUrl","agoraAppRecordKey","stripepublickey","stripeSecretKey","fwPublicKey","youTubeStreamKey","OneSignalApiKey","oneSignalAppID","currency","commission","fbStreamKey","agoraAppID","AGORA_CERT","AGORA_CUSTOMER_KEY","AGORA_CUSTOMER_SECRET","FLUTTERWAVE_SECRET_KEY","AWSVENDOR","AWSREGION","AWSBUCKET","AWSACCESSKEY","AWSSECRETKEY","iosVersion","androidVersion","email"],"sources":["/var/www/admin/src/hooks/useAdminSettingsSubmit.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport Cookies from \"js-cookie\";\nimport dayjs from \"dayjs\";\nimport { useLocation } from \"react-router\";\n\nimport AdminServices from \"../services/AdminServices\";\nimport { AdminContext } from \"../context/AdminContext\";\nimport { SidebarContext } from \"../context/SidebarContext\";\nimport { notifyError, notifySuccess } from \"../utils/toast\";\n\nconst useAdminSettingsSubmit = (id) => {\n  const { state } = useContext(AdminContext);\n  const { adminInfo } = state;\n  const location = useLocation();\n  const { isDrawerOpen, closeDrawer, setIsUpdate } = useContext(SidebarContext);\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    clearErrors,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = (data) => {\n    console.log(data);\n    AdminServices.updateAppSettings(data)\n      .then((res) => {\n        setIsUpdate(true);\n        notifySuccess(\"Admin Updated Successfully!\");\n      })\n      .catch((err) => notifyError(err.message));\n  };\n\n  useEffect(() => {\n    if (id) {\n      AdminServices.getAppSettings(id)\n        .then((res) => {\n          if (res) {\n            var data = res[0];\n            setValue(\"recordedVideoBaseUrl\", data.recordedVideoBaseUrl);\n            setValue(\"apiBaseUrl\", data.apiBaseUrl);\n            setValue(\"agoraAppRecordKey\", data.agoraAppRecordKey);\n            setValue(\"stripepublickey\", data.stripepublickey);\n            setValue(\"stripeSecretKey\", data.stripeSecretKey);\n            setValue(\"fwPublicKey\", data.fwPublicKey);\n            setValue(\"youTubeStreamKey\", data.youTubeStreamKey);\n            setValue(\"OneSignalApiKey\", data.OneSignalApiKey);\n            setValue(\"oneSignalAppID\", data.oneSignalAppID);\n            setValue(\"currency\", data.currency);\n            setValue(\"commission\", data.commission);\n            setValue(\"fbStreamKey\", data.fbStreamKey);\n            setValue(\"agoraAppID\", data.agoraAppID);\n            setValue(\"AGORA_CERT\", data.AGORA_CERT);\n            setValue(\"AGORA_CUSTOMER_KEY\", data.AGORA_CUSTOMER_KEY);\n            setValue(\"AGORA_CUSTOMER_SECRET\", data.AGORA_CUSTOMER_SECRET);\n            setValue(\"FLUTTERWAVE_SECRET_KEY\", data.FLUTTERWAVE_SECRET_KEY);\n            setValue(\"AWSVENDOR\", data.AWSVENDOR);\n            setValue(\"AWSREGION\", data.AWSREGION);\n            setValue(\"AWSBUCKET\", data.AWSBUCKET);\n            setValue(\"AWSACCESSKEY\", data.AWSACCESSKEY);\n            setValue(\"AWSSECRETKEY\", data.AWSSECRETKEY);\n            setValue(\"iosVersion\", data.iosVersion);\n            setValue(\"androidVersion\", data.androidVersion);\n          }\n        })\n        .catch((err) => {\n          notifyError(\"There is a server error!\");\n        });\n    }\n  }, [id, setValue, isDrawerOpen, adminInfo.email, clearErrors]);\n\n  return {\n    register,\n    handleSubmit,\n    onSubmit,\n    errors,\n  };\n};\n\nexport default useAdminSettingsSubmit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}