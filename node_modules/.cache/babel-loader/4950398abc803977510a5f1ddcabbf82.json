{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import{useForm}from\"react-hook-form\";import{AdminContext}from\"../context/AdminContext\";import{notifyError,notifySuccess}from\"../utils/toast\";import ShopServices from\"../services/ShopServices\";const useSettingsSubmit=id=>{const{state}=useContext(AdminContext);const{adminInfo}=state;const[shopId,setShopId]=useState(\"\");const{register,handleSubmit,setValue,clearErrors,formState:{errors}}=useForm();const onSubmit=data=>{ShopServices.updateShop(shopId,data).then(res=>{notifySuccess(\"Shop updated Successfully!\");}).catch(err=>notifyError(err.message));};useEffect(()=>{if(id){ShopServices.getShopByUserId(id).then(res=>{console.log(\"shop\",res);setShopId(res._id);if(res){setValue(\"wcSecretKey\",res.wcConsumerKey);setValue(\"wcConsumerKey\",res.wcSecretKey);setValue(\"wcUrl\",res.wcUrl);setValue(\"shopifyUrl\",res.shopifyUrl);setValue(\"shopifyAccessToken\",res.shopifyAccessToken);}}).catch(err=>{// notifyError(\"There is a server error!\");\n});}},[id,setValue,adminInfo.email,clearErrors]);return{register,handleSubmit,onSubmit,errors};};export default useSettingsSubmit;","map":{"version":3,"names":["useContext","useEffect","useState","useForm","AdminContext","notifyError","notifySuccess","ShopServices","useSettingsSubmit","id","state","adminInfo","shopId","setShopId","register","handleSubmit","setValue","clearErrors","formState","errors","onSubmit","data","updateShop","then","res","catch","err","message","getShopByUserId","console","log","_id","wcConsumerKey","wcSecretKey","wcUrl","shopifyUrl","shopifyAccessToken","email"],"sources":["/var/www/admin/src/hooks/useSettingsSubmit.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { AdminContext } from \"../context/AdminContext\";\nimport { notifyError, notifySuccess } from \"../utils/toast\";\nimport ShopServices from \"../services/ShopServices\";\n\nconst useSettingsSubmit = (id) => {\n  const { state } = useContext(AdminContext);\n    const { adminInfo } = state;\n    const [shopId, setShopId] = useState(\"\")\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    clearErrors,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = (data) => {\n\n    ShopServices.updateShop(shopId, data)\n      .then((res) => {\n        notifySuccess(\"Shop updated Successfully!\");\n      })\n      .catch((err) => notifyError(err.message));\n  };\n\n  useEffect(() => {\n    if (id) {\n      ShopServices.getShopByUserId(id)\n        .then((res) => {\n            console.log(\"shop\", res);\n            setShopId(res._id);\n            if (res) {\n              setValue(\"wcSecretKey\", res.wcConsumerKey);\n              setValue(\"wcConsumerKey\",res.wcSecretKey);\n              setValue(\"wcUrl\", res.wcUrl);\n              setValue(\"shopifyUrl\", res.shopifyUrl);\n              setValue(\"shopifyAccessToken\", res.shopifyAccessToken);\n            }\n        })\n        .catch((err) => {\n          // notifyError(\"There is a server error!\");\n        });\n    }\n  }, [id, setValue, adminInfo.email, clearErrors]);\n\n  return {\n    register,\n    handleSubmit,\n    onSubmit,\n    errors,\n  };\n};\n\nexport default useSettingsSubmit;\n"],"mappings":"AAAA,OAASA,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACvD,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,YAAY,KAAQ,yBAAyB,CACtD,OAASC,WAAW,CAAEC,aAAa,KAAQ,gBAAgB,CAC3D,MAAO,CAAAC,YAAY,KAAM,0BAA0B,CAEnD,KAAM,CAAAC,iBAAiB,CAAIC,EAAE,EAAK,CAChC,KAAM,CAAEC,KAAM,CAAC,CAAGV,UAAU,CAACI,YAAY,CAAC,CACxC,KAAM,CAAEO,SAAU,CAAC,CAAGD,KAAK,CAC3B,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAE1C,KAAM,CACJY,QAAQ,CACRC,YAAY,CACZC,QAAQ,CACRC,WAAW,CACXC,SAAS,CAAE,CAAEC,MAAO,CACtB,CAAC,CAAGhB,OAAO,CAAC,CAAC,CAEb,KAAM,CAAAiB,QAAQ,CAAIC,IAAI,EAAK,CAEzBd,YAAY,CAACe,UAAU,CAACV,MAAM,CAAES,IAAI,CAAC,CAClCE,IAAI,CAAEC,GAAG,EAAK,CACblB,aAAa,CAAC,4BAA4B,CAAC,CAC7C,CAAC,CAAC,CACDmB,KAAK,CAAEC,GAAG,EAAKrB,WAAW,CAACqB,GAAG,CAACC,OAAO,CAAC,CAAC,CAC7C,CAAC,CAED1B,SAAS,CAAC,IAAM,CACd,GAAIQ,EAAE,CAAE,CACNF,YAAY,CAACqB,eAAe,CAACnB,EAAE,CAAC,CAC7Bc,IAAI,CAAEC,GAAG,EAAK,CACXK,OAAO,CAACC,GAAG,CAAC,MAAM,CAAEN,GAAG,CAAC,CACxBX,SAAS,CAACW,GAAG,CAACO,GAAG,CAAC,CAClB,GAAIP,GAAG,CAAE,CACPR,QAAQ,CAAC,aAAa,CAAEQ,GAAG,CAACQ,aAAa,CAAC,CAC1ChB,QAAQ,CAAC,eAAe,CAACQ,GAAG,CAACS,WAAW,CAAC,CACzCjB,QAAQ,CAAC,OAAO,CAAEQ,GAAG,CAACU,KAAK,CAAC,CAC5BlB,QAAQ,CAAC,YAAY,CAAEQ,GAAG,CAACW,UAAU,CAAC,CACtCnB,QAAQ,CAAC,oBAAoB,CAAEQ,GAAG,CAACY,kBAAkB,CAAC,CACxD,CACJ,CAAC,CAAC,CACDX,KAAK,CAAEC,GAAG,EAAK,CACd;AAAA,CACD,CAAC,CACN,CACF,CAAC,CAAE,CAACjB,EAAE,CAAEO,QAAQ,CAAEL,SAAS,CAAC0B,KAAK,CAAEpB,WAAW,CAAC,CAAC,CAEhD,MAAO,CACLH,QAAQ,CACRC,YAAY,CACZK,QAAQ,CACRD,MACF,CAAC,CACH,CAAC,CAED,cAAe,CAAAX,iBAAiB"},"metadata":{},"sourceType":"module"}