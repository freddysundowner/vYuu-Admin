{"ast":null,"code":"import{Button,Input}from'@windmill/react-ui';import React,{useRef,useState}from'react';import{Link}from'react-router-dom';import{useParams}from'react-router';import{useForm}from'react-hook-form';import Error from'../components/form/Error';import LabelArea from'../components/form/LabelArea';import AdminServices from'../services/AdminServices';import{notifyError,notifySuccess}from'../utils/toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ResetPassword=()=>{const{token}=useParams();const password=useRef('');const[loading,setLoading]=useState(false);const{register,handleSubmit,watch,formState:{errors}}=useForm();password.current=watch('newPassword');const submitHandler=_ref=>{let{newPassword}=_ref;setLoading(true);AdminServices.resetPassword({newPassword,token}).then(res=>{setLoading(false);notifySuccess(res.message);}).catch(err=>{setLoading(false);notifyError(err?err.response.data.message:err.message);});};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col overflow-y-auto md:flex-row\",children:/*#__PURE__*/_jsx(\"main\",{className:\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4 text-xl font-semibold text-gray-700 dark:text-gray-200\",children:\"Reset password\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(submitHandler),children:[/*#__PURE__*/_jsx(LabelArea,{label:\"Password\"}),/*#__PURE__*/_jsx(Input,{label:\"Password\",name:\"newPassword\",type:\"password\",placeholder:\"Password\",...register('newPassword',{required:'You must specify a password',minLength:{value:10,message:'Password must have at least 10 characters'}}),className:\"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white\"}),/*#__PURE__*/_jsx(Error,{errorName:errors.newPassword}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\"}),/*#__PURE__*/_jsx(LabelArea,{label:\"Confirm Password\"}),/*#__PURE__*/_jsx(Input,{label:\"Confirm Password\",name:\"confirm_password\",type:\"password\",placeholder:\"Confirm Password\",...register('confirm_password',{validate:value=>value===password.current||'The passwords do not match'}),className:\"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white\"}),/*#__PURE__*/_jsx(Error,{errorName:errors.confirm_password}),/*#__PURE__*/_jsx(Button,{disabled:loading,type:\"submit\",block:true,className:\"mt-4 h-12\",children:\"Reset\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(Link,{className:\"text-sm font-medium text-green-500 dark:text-green-400 hover:underline\",to:\"/login\",children:\"Already have an account? Login\"})})]})})})})});};export default ResetPassword;","map":{"version":3,"names":["Button","Input","React","useRef","useState","Link","useParams","useForm","Error","LabelArea","AdminServices","notifyError","notifySuccess","jsx","_jsx","jsxs","_jsxs","ResetPassword","token","password","loading","setLoading","register","handleSubmit","watch","formState","errors","current","submitHandler","_ref","newPassword","resetPassword","then","res","message","catch","err","response","data","className","children","onSubmit","label","name","type","placeholder","required","minLength","value","errorName","validate","confirm_password","disabled","block","to"],"sources":["/var/www/admin/src/pages/ResetPassword.js"],"sourcesContent":["import { Button, Input } from '@windmill/react-ui';\nimport React, { useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useParams } from 'react-router';\nimport { useForm } from 'react-hook-form';\n\nimport Error from '../components/form/Error';\nimport LabelArea from '../components/form/LabelArea';\nimport AdminServices from '../services/AdminServices';\nimport { notifyError, notifySuccess } from '../utils/toast';\n\nconst ResetPassword = () => {\n  const { token } = useParams();\n  const password = useRef('');\n  const [loading, setLoading] = useState(false);\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: { errors },\n  } = useForm();\n\n  password.current = watch('newPassword');\n\n  const submitHandler = ({ newPassword }) => {\n    setLoading(true);\n\n    AdminServices.resetPassword({ newPassword, token })\n      .then((res) => {\n        setLoading(false);\n        notifySuccess(res.message);\n      })\n      .catch((err) => {\n        setLoading(false);\n        notifyError(err ? err.response.data.message : err.message);\n      });\n  };\n\n  return (\n    <div className=\"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900\">\n      <div className=\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800\">\n        <div className=\"flex flex-col overflow-y-auto md:flex-row\">\n          <main className=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\n            <div className=\"w-full\">\n              <h1 className=\"mb-4 text-xl font-semibold text-gray-700 dark:text-gray-200\">\n                Reset password\n              </h1>\n\n              <form onSubmit={handleSubmit(submitHandler)}>\n                <LabelArea label=\"Password\" />\n                <Input\n                  label=\"Password\"\n                  name=\"newPassword\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  {...register('newPassword', {\n                    required: 'You must specify a password',\n                    minLength: {\n                      value: 10,\n                      message: 'Password must have at least 10 characters',\n                    },\n                  })}\n                  className=\"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white\"\n                />\n                <Error errorName={errors.newPassword} />\n                <div className=\"mt-6\"></div>\n                <LabelArea label=\"Confirm Password\" />\n                <Input\n                  label=\"Confirm Password\"\n                  name=\"confirm_password\"\n                  type=\"password\"\n                  placeholder=\"Confirm Password\"\n                  {...register('confirm_password', {\n                    validate: (value) =>\n                      value === password.current ||\n                      'The passwords do not match',\n                  })}\n                  className=\"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white\"\n                />\n                <Error errorName={errors.confirm_password} />\n\n                <Button\n                  disabled={loading}\n                  type=\"submit\"\n                  block\n                  className=\"mt-4 h-12\"\n                >\n                  Reset\n                </Button>\n              </form>\n              <p className=\"mt-4\">\n                <Link\n                  className=\"text-sm font-medium text-green-500 dark:text-green-400 hover:underline\"\n                  to=\"/login\"\n                >\n                  Already have an account? Login\n                </Link>\n              </p>\n            </div>\n          </main>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ResetPassword;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}