{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import{useForm}from\"react-hook-form\";import{SidebarContext}from\"../context/SidebarContext\";import InterestServices from\"../services/InterestServices\";import{notifyError,notifySuccess}from\"../utils/toast\";const useSubInterestSubmit=(id,interstsId)=>{const{isDrawerOpen,closeDrawer,setIsUpdate}=useContext(SidebarContext);const[update,setUpdate]=useState();const{register,handleSubmit,setValue,clearErrors,formState:{errors}}=useForm();const onSubmit=_ref=>{let{name,type}=_ref;if(!name){notifyError(\"name is required!\");return;}const channelData={name:name};channelData[\"channel\"]=interstsId;console.log(update);if(update){InterestServices.updateInterest(id,channelData).then(res=>{setIsUpdate(true);notifySuccess(\"Updated successfully\");}).catch(err=>notifyError(err.message));closeDrawer();}else if(interstsId){InterestServices.addInterest(channelData).then(res=>{setIsUpdate(true);notifySuccess(\"added successfully\");}).catch(err=>notifyError(err.message));closeDrawer();}};useEffect(()=>{if(!isDrawerOpen){setValue(\"name\");clearErrors(\"name\");return;}if(id){InterestServices.getInterestById(id).then(res=>{if(res){setValue(\"name\",res.name);setUpdate(true);}}).catch(err=>{console.log(err);notifyError(\"There is a server error!\");});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[id,setValue,isDrawerOpen]);return{register,handleSubmit,onSubmit,errors};};export default useSubInterestSubmit;","map":{"version":3,"names":["useContext","useEffect","useState","useForm","SidebarContext","InterestServices","notifyError","notifySuccess","useSubInterestSubmit","id","interstsId","isDrawerOpen","closeDrawer","setIsUpdate","update","setUpdate","register","handleSubmit","setValue","clearErrors","formState","errors","onSubmit","_ref","name","type","channelData","console","log","updateInterest","then","res","catch","err","message","addInterest","getInterestById"],"sources":["/var/www/admin/src/hooks/useSubInterestSubmit.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { SidebarContext } from \"../context/SidebarContext\";\nimport InterestServices from \"../services/InterestServices\";\nimport { notifyError, notifySuccess } from \"../utils/toast\";\n\nconst useSubInterestSubmit = (id, interstsId) => {\n  const { isDrawerOpen, closeDrawer, setIsUpdate } = useContext(SidebarContext);\n\n  const [update, setUpdate] = useState();\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    clearErrors,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = ({ name, type }) => {\n    if (!name) {\n      notifyError(\"name is required!\");\n      return;\n    }\n    const channelData = {\n      name: name,\n    };\n    channelData[\"channel\"] = interstsId;\n    console.log(update);\n    if (update) {\n      InterestServices.updateInterest(id, channelData)\n        .then((res) => {\n          setIsUpdate(true);\n          notifySuccess(\"Updated successfully\");\n        })\n        .catch((err) => notifyError(err.message));\n      closeDrawer();\n    } else if (interstsId) {\n      InterestServices.addInterest(channelData)\n        .then((res) => {\n          setIsUpdate(true);\n          notifySuccess(\"added successfully\");\n        })\n        .catch((err) => notifyError(err.message));\n      closeDrawer();\n    }\n  };\n\n  useEffect(() => {\n    if (!isDrawerOpen) {\n      setValue(\"name\");\n      clearErrors(\"name\");\n      return;\n    }\n    if (id) {\n      InterestServices.getInterestById(id)\n        .then((res) => {\n          if (res) {\n            setValue(\"name\", res.name);\n            setUpdate(true);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          notifyError(\"There is a server error!\");\n        });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id, setValue, isDrawerOpen]);\n  return {\n    register,\n    handleSubmit,\n    onSubmit,\n    errors,\n  };\n};\n\nexport default useSubInterestSubmit;\n"],"mappings":"AAAA,OAASA,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACvD,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,cAAc,KAAQ,2BAA2B,CAC1D,MAAO,CAAAC,gBAAgB,KAAM,8BAA8B,CAC3D,OAASC,WAAW,CAAEC,aAAa,KAAQ,gBAAgB,CAE3D,KAAM,CAAAC,oBAAoB,CAAGA,CAACC,EAAE,CAAEC,UAAU,GAAK,CAC/C,KAAM,CAAEC,YAAY,CAAEC,WAAW,CAAEC,WAAY,CAAC,CAAGb,UAAU,CAACI,cAAc,CAAC,CAE7E,KAAM,CAACU,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,CAAC,CACtC,KAAM,CACJc,QAAQ,CACRC,YAAY,CACZC,QAAQ,CACRC,WAAW,CACXC,SAAS,CAAE,CAAEC,MAAO,CACtB,CAAC,CAAGlB,OAAO,CAAC,CAAC,CAEb,KAAM,CAAAmB,QAAQ,CAAGC,IAAA,EAAoB,IAAnB,CAAEC,IAAI,CAAEC,IAAK,CAAC,CAAAF,IAAA,CAC9B,GAAI,CAACC,IAAI,CAAE,CACTlB,WAAW,CAAC,mBAAmB,CAAC,CAChC,OACF,CACA,KAAM,CAAAoB,WAAW,CAAG,CAClBF,IAAI,CAAEA,IACR,CAAC,CACDE,WAAW,CAAC,SAAS,CAAC,CAAGhB,UAAU,CACnCiB,OAAO,CAACC,GAAG,CAACd,MAAM,CAAC,CACnB,GAAIA,MAAM,CAAE,CACVT,gBAAgB,CAACwB,cAAc,CAACpB,EAAE,CAAEiB,WAAW,CAAC,CAC7CI,IAAI,CAAEC,GAAG,EAAK,CACblB,WAAW,CAAC,IAAI,CAAC,CACjBN,aAAa,CAAC,sBAAsB,CAAC,CACvC,CAAC,CAAC,CACDyB,KAAK,CAAEC,GAAG,EAAK3B,WAAW,CAAC2B,GAAG,CAACC,OAAO,CAAC,CAAC,CAC3CtB,WAAW,CAAC,CAAC,CACf,CAAC,IAAM,IAAIF,UAAU,CAAE,CACrBL,gBAAgB,CAAC8B,WAAW,CAACT,WAAW,CAAC,CACtCI,IAAI,CAAEC,GAAG,EAAK,CACblB,WAAW,CAAC,IAAI,CAAC,CACjBN,aAAa,CAAC,oBAAoB,CAAC,CACrC,CAAC,CAAC,CACDyB,KAAK,CAAEC,GAAG,EAAK3B,WAAW,CAAC2B,GAAG,CAACC,OAAO,CAAC,CAAC,CAC3CtB,WAAW,CAAC,CAAC,CACf,CACF,CAAC,CAEDX,SAAS,CAAC,IAAM,CACd,GAAI,CAACU,YAAY,CAAE,CACjBO,QAAQ,CAAC,MAAM,CAAC,CAChBC,WAAW,CAAC,MAAM,CAAC,CACnB,OACF,CACA,GAAIV,EAAE,CAAE,CACNJ,gBAAgB,CAAC+B,eAAe,CAAC3B,EAAE,CAAC,CACjCqB,IAAI,CAAEC,GAAG,EAAK,CACb,GAAIA,GAAG,CAAE,CACPb,QAAQ,CAAC,MAAM,CAAEa,GAAG,CAACP,IAAI,CAAC,CAC1BT,SAAS,CAAC,IAAI,CAAC,CACjB,CACF,CAAC,CAAC,CACDiB,KAAK,CAAEC,GAAG,EAAK,CACdN,OAAO,CAACC,GAAG,CAACK,GAAG,CAAC,CAChB3B,WAAW,CAAC,0BAA0B,CAAC,CACzC,CAAC,CAAC,CACN,CACA;AACF,CAAC,CAAE,CAACG,EAAE,CAAES,QAAQ,CAAEP,YAAY,CAAC,CAAC,CAChC,MAAO,CACLK,QAAQ,CACRC,YAAY,CACZK,QAAQ,CACRD,MACF,CAAC,CACH,CAAC,CAED,cAAe,CAAAb,oBAAoB"},"metadata":{},"sourceType":"module"}