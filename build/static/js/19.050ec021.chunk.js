(this.webpackJsonptokshop=this.webpackJsonptokshop||[]).push([[19],{202:function(e,a,t){"use strict";t.r(a);var r=t(0),s=t(16),l=t(43),c=t(71),i=t(44),n=t(47),o=t(11),d=t(61),m=t(45),j=t(1);a.default=()=>{const{state:{adminInfo:e,token:a}}=Object(r.useContext)(o.a),{register:t,handleSubmit:b,onSubmit:g,errors:u,imageUrl:p,setImageUrl:h}=Object(c.a)(e._id);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(m.a,{children:"Admin Settings"}),Object(j.jsx)("div",{className:"container p-6 mx-auto bg-white  dark:bg-gray-800 dark:text-gray-200 rounded-lg",children:Object(j.jsxs)("form",{onSubmit:b(g),children:[Object(j.jsx)("div",{className:"p-6 flex-grow scrollbar-hide w-full max-h-full",children:Object(j.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(j.jsx)(i.a,{label:"Your Role"}),Object(j.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(j.jsx)(d.a,{register:t,label:"Role",name:"role"}),Object(j.jsx)(l.a,{errorName:u.role})]})]})}),Object(j.jsx)("div",{className:"p-6 flex-grow scrollbar-hide w-full max-h-full",children:Object(j.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(j.jsx)(i.a,{label:"Wooocommerce Security Key"}),Object(j.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(j.jsx)(n.a,{register:t,defaultValue:"",label:"SecurityKey ",name:"wcSecretKey",type:"wcSecretKey",placeholder:"security key"}),Object(j.jsx)(l.a,{errorName:u.role})]})]})}),Object(j.jsx)("div",{className:"p-6 flex-grow scrollbar-hide w-full max-h-full",children:Object(j.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(j.jsx)(i.a,{label:"Wooocommerce Consumer Key"}),Object(j.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(j.jsx)(n.a,{register:t,defaultValue:"",label:"ConsumerKey ",name:"wcConsumerKey",type:"wcConsumerKey",placeholder:"consumer key"}),Object(j.jsx)(l.a,{errorName:u.role})]})]})}),Object(j.jsx)("div",{className:"flex flex-row-reverse pr-6 pb-6",children:Object(j.jsx)(s.Button,{type:"submit",className:"h-12 px-6",children:"Update Settings"})})]})})]})}},61:function(e,a,t){"use strict";t(0);var r=t(16),s=t(1);a.a=e=>{let{setRole:a,register:t,name:l,label:c}=e;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)(r.Select,{onChange:e=>a(e.target.value),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",name:l,...t(`${l}`,{required:`${c} is required!`}),children:[Object(s.jsx)("option",{value:"",defaultValue:!0,hidden:!0,children:"Admin role"}),Object(s.jsx)("option",{value:"admin",children:"Admin"}),Object(s.jsx)("option",{value:"restricted",children:"Restricted"})]})})}},71:function(e,a,t){"use strict";var r=t(0),s=t(53),l=t(8),c=t.n(l),i=t(48),n=t.n(i),o=t(2),d=t(49),m=t(11),j=t(17),b=t(18);a.a=e=>{const{state:a}=Object(r.useContext)(m.a),{adminInfo:t}=a,[l,i]=Object(r.useState)(""),[g,u]=Object(r.useState)(""),p=Object(o.h)(),{isDrawerOpen:h,closeDrawer:x,setIsUpdate:O}=Object(r.useContext)(j.a),{register:f,handleSubmit:w,setValue:v,clearErrors:y,formState:{errors:S}}=Object(s.a)();return Object(r.useEffect)((()=>{if(!h)return v("email"),v("password"),v("joiningDate"),v("role"),y("email"),y("password"),y("joiningDate"),void y("role");e&&d.a.getAdminById(e).then((e=>{e&&(v("email",e.admin.email),v("password"),v("joiningDate",e.admin.joiningData),v("role",e.admin.role),u(n()(e.joiningData).format("YYYY-MM-DD")))})).catch((e=>{Object(b.b)("There is a server error!")}))}),[e,v,h,t.email,y]),Object(r.useEffect)((()=>{if("/setting"===p.pathname||"/edit-profile"===p.pathname&&c.a.get("adminInfo")){const e=JSON.parse(c.a.get("adminInfo"));v("email",e.email),v("role",e.role),i(e.image),u(n()(e.joiningData).format("YYYY-MM-DD"))}}),[]),{register:f,handleSubmit:w,onSubmit:a=>{const r={email:a.email,password:a.password,joiningDate:g||n()(new Date).format("YYYY-MM-DD"),role:a.role};e?(d.a.updateAdmin(e,{email:t.email,data:r}).then((e=>{O(!0),Object(b.c)("Admin Updated Successfully!")})).catch((e=>Object(b.b)(e.message))),x()):(d.a.addAdmin(r).then((e=>{O(!0),Object(b.c)(e.message)})).catch((e=>Object(b.b)(e.message))),x())},errors:S,setImageUrl:i,imageUrl:l,selectedDate:g,setSelectedDate:u}}}}]);
//# sourceMappingURL=19.050ec021.chunk.js.map