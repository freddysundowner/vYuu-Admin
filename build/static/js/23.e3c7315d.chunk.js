(this.webpackJsonptokshop=this.webpackJsonptokshop||[]).push([[23],{212:function(e,t,r){"use strict";r.r(t);var l=r(0),a=r(48),s=r(117),d=r.n(s),o=r(16),n=r(124),c=r(41),i=r(50),b=r(57),j=r(55),x=r(51),g=r(1);var u=e=>{let{children:t,title:r}=e;return Object(g.jsxs)("div",{className:"min-w-0 p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800",children:[Object(g.jsx)("p",{className:"mb-4 font-semibold text-gray-800 dark:text-gray-300",children:r}),t]})};var h=e=>{let{title:t,Icon:r,quantity:l,amount:a,className:s}=e;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(o.Card,{className:"flex h-full",children:Object(g.jsxs)(o.CardBody,{className:"flex items-center border border-gray-200 dark:border-gray-800 w-full rounded-lg",children:[Object(g.jsx)("div",{className:`flex items-center justify-center p-3 rounded-full h-12 w-12 text-center mr-4 text-lg ${s}`,children:Object(g.jsx)(r,{})}),Object(g.jsxs)("div",{children:[Object(g.jsxs)("p",{className:"mb-1 text-sm font-medium text-gray-600 dark:text-gray-400",children:[Object(g.jsx)("span",{children:t})," ",a&&Object(g.jsxs)("span",{className:"text-red-400 text-sm font-semibold",children:["(",parseFloat(a).toFixed(2),")"]})]}),Object(g.jsx)("p",{className:"text-2xl font-bold leading-none text-gray-600 dark:text-gray-200",children:l})]})]})})})},O=r(45),m=r(62);var p=e=>{let{orders:t}=e;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(o.TableBody,{children:null===t||void 0===t?void 0:t.map((e=>{var t;return Object(g.jsxs)(o.TableRow,{children:[Object(g.jsx)(o.TableCell,{children:Object(g.jsx)("span",{className:"text-sm",children:a(e.createdAt).format("MMM D, YYYY")})}),Object(g.jsxs)(o.TableCell,{children:[" ",Object(g.jsx)("span",{className:"text-sm",children:null===(t=e.customerId)||void 0===t?void 0:t.firstName})]}),Object(g.jsx)(o.TableCell,{children:Object(g.jsxs)("span",{className:"text-sm font-semibold",children:["$",Object(g.jsx)("span",{className:"text-sm",children:e.shippingFee})," "]})}),Object(g.jsx)(o.TableCell,{children:Object(g.jsxs)("span",{className:"text-sm font-semibold",children:["$",Object(g.jsx)("span",{className:"text-sm",children:e.servicefee})," "]})}),Object(g.jsxs)(o.TableCell,{children:[" ",Object(g.jsxs)("span",{className:"text-sm font-semibold",children:["$",Math.round(e.totalCost),".00"]})," "]}),Object(g.jsxs)(o.TableCell,{children:[" ",Object(g.jsx)("span",{className:"text-sm font-semibold",children:"WC"==e.ordertype?"Woocommerce":e.ordertype})," "]}),Object(g.jsx)(o.TableCell,{children:Object(g.jsx)(m.a,{status:e.status})})]},e._id)}))})})};var v=e=>{let{title:t,Icon:r,className:l,price:a}=e;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(o.Card,{className:"flex justify-center text-center h-full",children:Object(g.jsxs)(o.CardBody,{className:`border border-gray-200 dark:border-gray-800 w-full p-6 rounded-lg ${l}`,children:[Object(g.jsx)("div",{className:`text-center inline-block text-3xl ${l}`,children:Object(g.jsx)(r,{})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{className:"mb-3 text-base font-medium text-gray-50 dark:text-gray-100",children:t}),Object(g.jsxs)("p",{className:"text-3xl font-bold leading-none text-gray-50 dark:text-gray-50",children:["$",Math.round(a)]})]})]})})})},y=r(129);var C=e=>{let{salesReport:t}=e;const[r,a]=Object(l.useState)({title:"Sales",color:"green"}),s=e=>{let{title:t,color:r}=e;a({title:t,color:r})},d={data:{labels:null===t||void 0===t?void 0:t.map((e=>e.date)),datasets:["Sales"===r.title?{label:"Sales",data:null===t||void 0===t?void 0:t.map((e=>e.totalCost)),borderColor:"#10B981",backgroundColor:"#10B981",borderWidth:3,yAxisID:"y"}:{label:"Order",data:null===t||void 0===t?void 0:t.map((e=>e.order)),borderColor:"#F97316",backgroundColor:"#F97316",borderWidth:3,yAxisID:"y"}]},options:{responsive:!0},legend:{display:!1}};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"text-sm font-medium text-center text-gray-500 border-b border-gray-200 dark:text-gray-400 dark:border-gray-700 mb-4",children:Object(g.jsxs)("ul",{className:"flex flex-wrap -mb-px",children:[Object(g.jsx)("li",{className:"mr-2",children:Object(g.jsx)("button",{onClick:()=>s({title:"Sales",color:"green"}),type:"button",className:`inline-block p-2 rounded-t-lg border-b-2 border-transparent ${"Sales"===r.title?"text-green-600 border-green-600 dark:text-green-500 dark:border-green-500":"hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300"}  focus:outline-none`,children:"Sales"})}),Object(g.jsx)("li",{className:"mr-2",children:Object(g.jsx)("button",{onClick:()=>s({title:"Orders",color:"red"}),type:"button",className:`inline-block p-2 rounded-t-lg border-b-2 border-transparent ${"Orders"===r.title?"text-orange-500 border-orange-500 dark:text-orange-500 dark:border-orange-500":"hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300"}  focus:outline-none`,children:"Orders"})})]})}),Object(g.jsx)(y.a,{...d})]})},N=r(11),k=r(46);var f=()=>{var e,t;const{state:r,dispatch:a}=Object(l.useContext)(N.a),{adminInfo:s}=r,{data:d,loading:o}=Object(i.a)((()=>k.a.getShopByUserId(s._id).then((e=>(console.log(e),j.a.getBestSellerProductChart({shopid:e._id})))))),n={data:{datasets:[{data:null===d||void 0===d||null===(e=d.bestSellingProduct)||void 0===e?void 0:e.map((e=>e.count)),backgroundColor:["#10B981","#3B82F6","#F97316","#0EA5E9"],label:"Dataset 1"}],labels:null===d||void 0===d||null===(t=d.bestSellingProduct)||void 0===t?void 0:t.map((e=>e._id))},options:{responsive:!0,cutoutPercentage:80},legend:{display:!1}};return Object(g.jsx)("div",{children:Object(g.jsx)(y.b,{...n,className:"chart"})})},$=r(17);t.default=()=>{var e,t,r;a.extend(d.a);const{state:s,dispatch:m}=Object(l.useContext)(N.a),{adminInfo:y}=s,[T,S]=Object(l.useState)([]),[B,D]=Object(l.useState)(0),{currentPage:w,handleChangePage:I}=Object(l.useContext)($.a),{data:P,loading:F}=Object(i.a)((()=>"shopowner"==y.role?k.a.getShopByUserId(y._id).then((e=>j.a.getDashboardOrdersData({page:w,limit:8,userid:y._id,role:y.role,shopid:e._id}))):j.a.getDashboardOrdersData({page:w,limit:8,userid:y._id,role:y.role,shopid:""}))),{dataTable:A}=Object(b.a)(null===P||void 0===P?void 0:P.orders);return Object(l.useEffect)((()=>{var e,t;const r=null===P||void 0===P||null===(e=P.todayOrder)||void 0===e?void 0:e.reduce(((e,t)=>e+t.totalCost),0);D(r),null===P||void 0===P||null===(t=P.weeklySaleReport)||void 0===t||t.reduce(((e,t)=>{let r=t.createdAt.split("T")[0];return e[r]||(e[r]={date:r,totalCost:0,order:0},T.push(e[r])),e[r].totalCost+=t.totalCost,e[r].order+=1,e}),{})}),[null===P||void 0===P?void 0:P.todayOrder,null===P||void 0===P?void 0:P.weeklySaleReport,T]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.a,{children:"Dashboard"}),Object(g.jsxs)("div",{className:"grid gap-4 mb-8 md:grid-cols-3 xl:grid-cols-3",children:[Object(g.jsx)(v,{title:"Today Order",Icon:n.d,price:B||0,className:"text-white dark:text-green-100 bg-teal-500"}),Object(g.jsx)(v,{title:"This Month",Icon:c.i,price:null!==P&&void 0!==P&&P.totalAmountOfThisMonth?null===P||void 0===P?void 0:P.totalAmountOfThisMonth:0,className:"text-white dark:text-green-100 bg-blue-500"}),Object(g.jsx)(v,{title:"Total Order",Icon:n.a,price:null!==P&&void 0!==P&&P.totalAmount?null===P||void 0===P?void 0:P.totalAmount:0,className:"text-white dark:text-green-100 bg-green-500"})]}),Object(g.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[Object(g.jsx)(h,{title:"Total Order",Icon:c.i,quantity:null===P||void 0===P?void 0:P.totalOrder,className:"text-orange-600 dark:text-orange-100 bg-orange-100 dark:bg-orange-500"}),Object(g.jsx)(h,{title:"Order Pending",Icon:c.g,quantity:null===P||void 0===P||null===(e=P.totalPendingOrder)||void 0===e?void 0:e.count,amount:(null===P||void 0===P||null===(t=P.totalPendingOrder)||void 0===t?void 0:t.total)&&(null===P||void 0===P||null===(r=P.totalPendingOrder)||void 0===r?void 0:r.total),className:"text-blue-600 dark:text-blue-100 bg-blue-100 dark:bg-blue-500"}),Object(g.jsx)(h,{title:"Order Processing",Icon:c.l,quantity:null===P||void 0===P?void 0:P.totalProcessingOrder,className:"text-teal-600 dark:text-teal-100 bg-teal-100 dark:bg-teal-500"}),Object(g.jsx)(h,{title:"Order Completed",Icon:c.a,quantity:null===P||void 0===P?void 0:P.totalDeliveredOrder,className:"text-green-600 dark:text-green-100 bg-green-100 dark:bg-green-500"})]}),Object(g.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 my-8",children:[Object(g.jsx)(u,{title:"Weekly Sales",children:Object(g.jsx)(C,{salesReport:T})}),Object(g.jsx)(u,{title:"Best Selling Products",children:Object(g.jsx)(f,{})})]}),Object(g.jsx)(O.a,{children:"Recent Order"}),F&&Object(g.jsx)(x.a,{loading:F}),A&&!F&&Object(g.jsxs)(o.TableContainer,{className:"mb-8",children:[Object(g.jsxs)(o.Table,{children:[Object(g.jsx)(o.TableHeader,{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)(o.TableCell,{children:"Order Time"}),Object(g.jsx)(o.TableCell,{children:"Customer"}),Object(g.jsx)(o.TableCell,{children:"Service Fee "}),Object(g.jsx)(o.TableCell,{children:"Shipping Fee"}),Object(g.jsx)(o.TableCell,{children:"Order amount"}),Object(g.jsx)(o.TableCell,{children:"Order type"}),Object(g.jsx)(o.TableCell,{children:"Status"})]})}),Object(g.jsx)(p,{orders:A})]}),Object(g.jsx)(o.TableFooter,{children:Object(g.jsx)(o.Pagination,{totalResults:null===P||void 0===P?void 0:P.totalOrder,resultsPerPage:8,onChange:I,label:"Table navigation"})})]})]})}},55:function(e,t,r){"use strict";var l=r(42);r(11),r(46);const a={getAllOrders(e){let{body:t,headers:r,contact:a,status:s,page:d=1,limit:o=8,day:n,userid:c=""}=e;const i=null!==a?a:"",b=null!==s?s:"",j=null!==n?n:"",x=null!==c?c:"";return l.a.get(`/orders/all/orders?contact=${i}&status=${b}&day=${j}&page=${d}&limit=${o}&userid=${x}`,t,r)},getRecentOrders(e){let{page:t=1,limit:r=8,startDate:a="1:00",endDate:s="23:59"}=e;return l.a.get(`/orders/recent?page=${t}&limit=${r}&startDate=${a}&endDate=${s}`)},getOrderAndSalesChart(e){let{startDate:t="1:00",endDate:r="23:59"}=e;return l.a.get(`/orders/sales/chart?startDate=${t}&endDate=${r}`)},getBestSellerProductChart(e){let{shopid:t=""}=e;return console.log("shopid",t),l.a.get(`/orders/dashboard/orders/best-seller/chart?shopid=${t}`)},async getDashboardOrdersData(e){let{page:t=1,limit:r=8,userid:a="",role:s="",shopid:d=""}=e;const o=null!==a?a:"";return"shopowner"==s?l.a.get(`/orders/dashboard/orders/shopowner?page=${t}&limit=${r}&userid=${o}&shopid=${d}`):l.a.get(`/orders/dashboard/orders?page=${t}&limit=${r}&userid=${o}`)},getOrderByUser:(e,t)=>l.a.get(`/orders/user/${e}`,t),getOrderById:(e,t)=>l.a.get(`/orders/orders/${e}`,t),updateOrder:(e,t,r)=>l.a.put(`/orders/orders/${e}`,t,r),deleteOrder:e=>l.a.delete(`/orders/${e}`)};t.a=a},62:function(e,t,r){"use strict";r(0);var l=r(16),a=r(1);t.a=e=>{let{status:t}=e;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("span",{className:"font-serif",children:["completed"===t&&Object(a.jsx)(l.Badge,{type:"success",children:t}),"pending"===t&&Object(a.jsx)(l.Badge,{type:"warning",children:t}),"processing"===t&&Object(a.jsx)(l.Badge,{children:t}),"shipped"===t&&Object(a.jsx)(l.Badge,{children:t}),"delivered"===t&&Object(a.jsx)(l.Badge,{type:"success",children:t}),"cancelled"===t&&Object(a.jsx)(l.Badge,{type:"danger",children:t})]})})}}}]);
//# sourceMappingURL=23.e3c7315d.chunk.js.map