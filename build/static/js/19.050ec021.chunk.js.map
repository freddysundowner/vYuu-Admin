{"version":3,"sources":["pages/EditProfile.js","components/form/SelectRole.js","hooks/useAdminSubmit.js"],"names":["EditProfile","state","adminInfo","token","useContext","AdminContext","register","handleSubmit","onSubmit","errors","imageUrl","setImageUrl","useAdminSubmit","_id","_jsxs","_Fragment","children","_jsx","PageTitle","className","LabelArea","label","SelectRole","name","Error","errorName","role","InputArea","defaultValue","type","placeholder","Button","_ref","setRole","Select","onChange","e","target","value","required","hidden","id","useState","selectedDate","setSelectedDate","location","useLocation","isDrawerOpen","closeDrawer","setIsUpdate","SidebarContext","setValue","clearErrors","formState","useForm","useEffect","AdminServices","getAdminById","then","res","admin","email","joiningData","dayjs","format","catch","err","notifyError","pathname","Cookies","get","user","JSON","parse","image","data","staffData","password","joiningDate","Date","updateAdmin","notifySuccess","message","addAdmin"],"mappings":"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","file":"static/js/19.050ec021.chunk.js","sourcesContent":["import React, { useContext } from \"react\";\nimport { Button } from \"@windmill/react-ui\";\n\nimport Error from \"../components/form/Error\";\nimport useAdminSubmit from \"../hooks/useAdminSubmit\";\nimport LabelArea from \"../components/form/LabelArea\";\nimport InputArea from \"../components/form/InputArea\";\nimport { AdminContext } from \"../context/AdminContext\";\nimport SelectRole from \"../components/form/SelectRole\";\nimport PageTitle from \"../components/Typography/PageTitle\";\n\nconst EditProfile = () => {\n  const {\n    state: { adminInfo, token },\n  } = useContext(AdminContext);\n\n  const { register, handleSubmit, onSubmit, errors, imageUrl, setImageUrl } =\n    useAdminSubmit(adminInfo._id);\n\n  return (\n    <>\n      <PageTitle>Admin Settings</PageTitle>\n      <div className=\"container p-6 mx-auto bg-white  dark:bg-gray-800 dark:text-gray-200 rounded-lg\">\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <div className=\"p-6 flex-grow scrollbar-hide w-full max-h-full\">\n            <div className=\"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6\">\n              <LabelArea label=\"Your Role\" />\n              <div className=\"col-span-8 sm:col-span-4\">\n                <SelectRole register={register} label=\"Role\" name=\"role\" />\n                <Error errorName={errors.role} />\n              </div>\n            </div>\n          </div>\n          <div className=\"p-6 flex-grow scrollbar-hide w-full max-h-full\">\n            <div className=\"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6\">\n              <LabelArea label=\"Wooocommerce Security Key\" />\n              <div className=\"col-span-8 sm:col-span-4\">\n                <InputArea\n                  register={register}\n                  defaultValue=\"\"\n                  label=\"SecurityKey \"\n                  name=\"wcSecretKey\"\n                  type=\"wcSecretKey\"\n                  placeholder=\"security key\"\n                />\n                <Error errorName={errors.role} />\n              </div>\n            </div>\n          </div>\n          <div className=\"p-6 flex-grow scrollbar-hide w-full max-h-full\">\n            <div className=\"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6\">\n              <LabelArea label=\"Wooocommerce Consumer Key\" />\n              <div className=\"col-span-8 sm:col-span-4\">\n                <InputArea\n                  register={register}\n                  defaultValue=\"\"\n                  label=\"ConsumerKey \"\n                  name=\"wcConsumerKey\"\n                  type=\"wcConsumerKey\"\n                  placeholder=\"consumer key\"\n                />\n                <Error errorName={errors.role} />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex flex-row-reverse pr-6 pb-6\">\n            <Button type=\"submit\" className=\"h-12 px-6\">\n              Update Settings\n            </Button>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n};\n\nexport default EditProfile;\n","import React from \"react\";\nimport { Select } from \"@windmill/react-ui\";\n\nconst SelectRole = ({ setRole, register, name, label }) => {\n  return (\n    <>\n      <Select\n        onChange={(e) => setRole(e.target.value)}\n        className=\"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white\"\n        name={name}\n        {...register(`${name}`, {\n          required: `${label} is required!`,\n        })}\n      >\n        <option value=\"\" defaultValue hidden>\n          Admin role\n        </option>\n        <option value=\"admin\">Admin</option>\n        <option value=\"restricted\">Restricted</option>\n      </Select>\n    </>\n  );\n};\n\nexport default SelectRole;\n","import { useContext, useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport Cookies from \"js-cookie\";\nimport dayjs from \"dayjs\";\nimport { useLocation } from \"react-router\";\n\nimport AdminServices from \"../services/AdminServices\";\nimport { AdminContext } from \"../context/AdminContext\";\nimport { SidebarContext } from \"../context/SidebarContext\";\nimport { notifyError, notifySuccess } from \"../utils/toast\";\n\nconst useAdminSubmit = (id) => {\n  const { state } = useContext(AdminContext);\n  const { adminInfo } = state;\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [selectedDate, setSelectedDate] = useState(\"\");\n  const location = useLocation();\n  const { isDrawerOpen, closeDrawer, setIsUpdate } = useContext(SidebarContext);\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    clearErrors,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = (data) => {\n    const staffData = {\n      email: data.email,\n      password: data.password,\n      joiningDate: selectedDate\n        ? selectedDate\n        : dayjs(new Date()).format(\"YYYY-MM-DD\"),\n      role: data.role,\n    };\n\n    if (id) {\n      AdminServices.updateAdmin(id, { email: adminInfo.email, data: staffData })\n        .then((res) => {\n          setIsUpdate(true);\n          notifySuccess(\"Admin Updated Successfully!\");\n        })\n        .catch((err) => notifyError(err.message));\n      closeDrawer();\n    } else {\n      AdminServices.addAdmin(staffData)\n        .then((res) => {\n          setIsUpdate(true);\n          notifySuccess(res.message);\n        })\n        .catch((err) => notifyError(err.message));\n      closeDrawer();\n    }\n  };\n\n  useEffect(() => {\n    if (!isDrawerOpen) {\n      setValue(\"email\");\n      setValue(\"password\");\n      setValue(\"joiningDate\");\n      setValue(\"role\");\n      clearErrors(\"email\");\n      clearErrors(\"password\");\n      clearErrors(\"joiningDate\");\n      clearErrors(\"role\");\n      return;\n    }\n    if (id) {\n      AdminServices.getAdminById(id)\n        .then((res) => {\n          if (res) {\n            setValue(\"email\", res.admin.email);\n            setValue(\"password\");\n            setValue(\"joiningDate\", res.admin.joiningData);\n            setValue(\"role\", res.admin.role);\n            setSelectedDate(dayjs(res.joiningData).format(\"YYYY-MM-DD\"));\n          }\n        })\n        .catch((err) => {\n          notifyError(\"There is a server error!\");\n        });\n    }\n  }, [id, setValue, isDrawerOpen, adminInfo.email, clearErrors]);\n\n  useEffect(() => {\n    if (\n      location.pathname === \"/setting\" ||\n      (location.pathname === \"/edit-profile\" && Cookies.get(\"adminInfo\"))\n    ) {\n      const user = JSON.parse(Cookies.get(\"adminInfo\"));\n      setValue(\"email\", user.email);\n      setValue(\"role\", user.role);\n      setImageUrl(user.image);\n      setSelectedDate(dayjs(user.joiningData).format(\"YYYY-MM-DD\"));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return {\n    register,\n    handleSubmit,\n    onSubmit,\n    errors,\n    setImageUrl,\n    imageUrl,\n    selectedDate,\n    setSelectedDate,\n  };\n};\n\nexport default useAdminSubmit;\n"],"sourceRoot":""}