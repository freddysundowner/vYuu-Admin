(this.webpackJsonptokshop=this.webpackJsonptokshop||[]).push([[18],{217:function(e,a,t){"use strict";t.r(a);var s=t(0),l=t(16),r=t(41),c=t(50),i=t(57),n=t(67),d=t(51),o=t(48),j=t(64),b=t(54),m=t(75),g=t(83),x=t(43),h=t(44),O=t(47),p=t(61),u=t(84),f=t(71),w=t(1);var v=e=>{let{id:a}=e;const{register:t,handleSubmit:s,onSubmit:r,errors:c,imageUrl:i,setImageUrl:n,selectedDate:d,setSelectedDate:o}=Object(f.a)(a);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:a?Object(w.jsx)(g.a,{title:"Update Admin",description:"Updated your staff necessary information from here"}):Object(w.jsx)(g.a,{title:"Add Admin",description:"Add your staff necessary information from here"})}),Object(w.jsx)(m.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:Object(w.jsx)(l.Card,{className:"overflow-y-scroll flex-grow scrollbar-hide w-full max-h-full",children:Object(w.jsx)(l.CardBody,{children:Object(w.jsxs)("form",{onSubmit:s(r),children:[Object(w.jsxs)("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[Object(w.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(w.jsx)(h.a,{label:"Email"}),Object(w.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(w.jsx)(O.a,{register:t,label:"Email",name:"email",type:"text",pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,placeholder:"Email"}),Object(w.jsx)(x.a,{errorName:c.email})]})]}),Object(w.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(w.jsx)(h.a,{label:"Password"}),Object(w.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[a?Object(w.jsx)(O.a,{required:!0,register:t,label:"Password",name:"password",type:"password",autocomplete:"new-password",placeholder:"Password"}):Object(w.jsx)(O.a,{register:t,label:"Password",name:"password",type:"password",autocomplete:"new-password",placeholder:"Password"}),Object(w.jsx)(x.a,{errorName:c.password})]})]}),Object(w.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(w.jsx)(h.a,{label:"Joining Date"}),Object(w.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(w.jsx)(l.Input,{onChange:e=>o(e.target.value),label:"Joining Date",name:"joiningDate",value:d,type:"date",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",placeholder:"Admin Joining Date"}),Object(w.jsx)(x.a,{errorName:c.joiningDate})]})]}),Object(w.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(w.jsx)(h.a,{label:"Admin Role"}),Object(w.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(w.jsx)(p.a,{register:t,label:"Role",name:"role"}),Object(w.jsx)(x.a,{errorName:c.role})]})]})]}),Object(w.jsx)(u.a,{id:a,title:"Admin"})]})})})})]})},N=t(58),D=t(76);var A=e=>{let{staffs:a}=e;const{title:t,serviceId:s,handleModalOpen:r,handleUpdate:c}=Object(N.a)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.a,{id:s,title:t}),Object(w.jsx)(b.a,{children:Object(w.jsx)(v,{id:s})}),Object(w.jsx)(l.TableBody,{children:null===a||void 0===a?void 0:a.map((e=>Object(w.jsxs)(l.TableRow,{children:[Object(w.jsx)(l.TableCell,{children:Object(w.jsxs)("span",{className:"font-semibold uppercase text-xs",children:[" ",e._id.substring(20,24)]})}),Object(w.jsxs)(l.TableCell,{children:[Object(w.jsx)("span",{className:"text-sm",children:e.email})," "]}),Object(w.jsx)(l.TableCell,{children:Object(w.jsx)("span",{className:"text-sm",children:o(e.joiningData).format("MMM D, YYYY")})}),Object(w.jsx)(l.TableCell,{children:Object(w.jsx)("span",{className:"text-sm font-semibold",children:e.role})}),Object(w.jsx)(l.TableCell,{children:Object(w.jsx)(D.a,{id:e._id,title:e.name,handleUpdate:c,handleModalOpen:r})})]},e._id)))})]})},y=t(49),C=t(11),T=t(17),S=t(45);a.default=()=>{const{state:e}=Object(s.useContext)(C.a),{adminInfo:a}=e,{toggleDrawer:t}=Object(s.useContext)(T.a),{data:o,loading:j}=Object(c.a)((()=>y.a.getAllAdmin())),{userRef:m,setRole:g,handleChangePage:x,totalResults:h,resultsPerPage:O,dataTable:p,serviceData:u,handleSubmitUser:f}=Object(i.a)(o.admin);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(S.a,{children:"All Admin"}),Object(w.jsx)(b.a,{children:Object(w.jsx)(v,{})}),Object(w.jsx)(l.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:Object(w.jsx)(l.CardBody,{children:Object(w.jsxs)("form",{onSubmit:f,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[Object(w.jsx)("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow"}),Object(w.jsx)("div",{className:"w-full md:w-56 lg:w-56 xl:w-56",children:Object(w.jsxs)(l.Button,{onClick:t,className:"w-full rounded-md h-12",children:[Object(w.jsx)("span",{className:"mr-3",children:Object(w.jsx)(r.f,{})}),"Add Admin"]})})]})})}),j?Object(w.jsx)(d.a,{loading:j}):0!==u.length?Object(w.jsxs)(l.TableContainer,{className:"mb-8 rounded-b-lg",children:[Object(w.jsxs)(l.Table,{children:[Object(w.jsx)(l.TableHeader,{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)(l.TableCell,{children:"Id"}),Object(w.jsx)(l.TableCell,{children:"Email"}),Object(w.jsx)(l.TableCell,{children:"Joining Date"}),Object(w.jsx)(l.TableCell,{children:"Role"}),Object(w.jsx)(l.TableCell,{className:"text-right",children:"Actions"})]})}),Object(w.jsx)(A,{staffs:p})]}),Object(w.jsx)(l.TableFooter,{children:Object(w.jsx)(l.Pagination,{totalResults:h,resultsPerPage:O,onChange:x,label:"Table navigation"})})]}):Object(w.jsx)(n.a,{title:"Admin"})]})}},61:function(e,a,t){"use strict";t(0);var s=t(16),l=t(1);a.a=e=>{let{setRole:a,register:t,name:r,label:c}=e;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(s.Select,{onChange:e=>a(e.target.value),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",name:r,...t(`${r}`,{required:`${c} is required!`}),children:[Object(l.jsx)("option",{value:"",defaultValue:!0,hidden:!0,children:"Admin role"}),Object(l.jsx)("option",{value:"admin",children:"Admin"}),Object(l.jsx)("option",{value:"restricted",children:"Restricted"})]})})}},71:function(e,a,t){"use strict";var s=t(0),l=t(53),r=t(8),c=t.n(r),i=t(48),n=t.n(i),d=t(2),o=t(49),j=t(11),b=t(17),m=t(18);a.a=e=>{const{state:a}=Object(s.useContext)(j.a),{adminInfo:t}=a,[r,i]=Object(s.useState)(""),[g,x]=Object(s.useState)(""),h=Object(d.h)(),{isDrawerOpen:O,closeDrawer:p,setIsUpdate:u}=Object(s.useContext)(b.a),{register:f,handleSubmit:w,setValue:v,clearErrors:N,formState:{errors:D}}=Object(l.a)();return Object(s.useEffect)((()=>{if(!O)return v("email"),v("password"),v("joiningDate"),v("role"),N("email"),N("password"),N("joiningDate"),void N("role");e&&o.a.getAdminById(e).then((e=>{e&&(v("email",e.admin.email),v("password"),v("joiningDate",e.admin.joiningData),v("role",e.admin.role),x(n()(e.joiningData).format("YYYY-MM-DD")))})).catch((e=>{Object(m.b)("There is a server error!")}))}),[e,v,O,t.email,N]),Object(s.useEffect)((()=>{if("/setting"===h.pathname||"/edit-profile"===h.pathname&&c.a.get("adminInfo")){const e=JSON.parse(c.a.get("adminInfo"));v("email",e.email),v("role",e.role),i(e.image),x(n()(e.joiningData).format("YYYY-MM-DD"))}}),[]),{register:f,handleSubmit:w,onSubmit:a=>{const s={email:a.email,password:a.password,joiningDate:g||n()(new Date).format("YYYY-MM-DD"),role:a.role};e?(o.a.updateAdmin(e,{email:t.email,data:s}).then((e=>{u(!0),Object(m.c)("Admin Updated Successfully!")})).catch((e=>Object(m.b)(e.message))),p()):(o.a.addAdmin(s).then((e=>{u(!0),Object(m.c)(e.message)})).catch((e=>Object(m.b)(e.message))),p())},errors:D,setImageUrl:i,imageUrl:r,selectedDate:g,setSelectedDate:x}}}}]);
//# sourceMappingURL=18.21e158fc.chunk.js.map